bootstrap:
  mlockall: true

script:
  disable_dynamic: true

http:
  enabled: true

path:
  logs: /data/log
  data: /data/data
  work: /data/work

cluster:
  name: log_cluster

node:
  name: "{{ ansible_hostname }}"

index:
    number_of_replicas: {{ 1 if groups[elasticsearch_hosts] |length > 1 else 0}}

discovery:
  zen:
    ping:
      multicast:
        enabled: false
      unicast:
        hosts: 
          {%- for host in groups[elasticsearch_hosts] -%}
              {% if loop.index > 1 -%}
              ,
              {%- else -%}
              {{ ' ' }}
              {%- endif -%}
              {{ hostvars[host]['ansible_' + hostvars[host].elasticsearch_if|default( hostvars[host].ansible_default_ipv4.interface ) ]['ipv4']['address'] }}
          {%- endfor %}


network:
  publish_host: {{ hostvars[inventory_hostname]['ansible_' + hostvars[inventory_hostname].elasticsearch_if|default( hostvars[inventory_hostname].ansible_default_ipv4.interface ) ]['ipv4']['address'] }}
